<html>
  <head>
    <title>RubyWorld Conference</title>
    <script src="https://cdn.jsdelivr.net/npm/ruby-3_2-wasm-wasi@next/dist/browser.script.iife.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>
    <script type="text/ruby" src="https://raw.githubusercontent.com/ksbmyk/sketch/main/public/p5.rb"></script>
    <script type="text/ruby">
      def setup
        createCanvas(600, 600)
        background(255)
      
        # 中心座標とサイズ
        center_x = width / 2
        center_y = height / 2
      
        # 外側の六角形
        noFill
        stroke("#9fa0a0")
        strokeWeight(20)
        outer_radius = 200 # 外側の六角形の半径
        outer_vertices = calculate_hexagon_vertices(center_x, center_y, outer_radius)
        draw_polygon(outer_vertices)
      
        # 頂点を結ぶ線
        stroke("#cbcbcc")
        strokeWeight(3)
        6.times do |i|
          line(outer_vertices[i][:x], outer_vertices[i][:y], center_x, center_y)
        end
        
        # 外側の六角形の各頂点に円
        colors = ["#fad96c", "#9acced", "#95c498", "#c4d686", "#caaccc", "#eba778"]
        circle_size = 80
        middle_size = 100
        strokeWeight(6)
        outer_vertices.each_with_index do |v, i|
          fill(colors[i])
          noStroke
          ellipse(v[:x], v[:y], circle_size, circle_size)
          noFill
          stroke(colors[i])
          ellipse(v[:x], v[:y], middle_size, middle_size)
        end
        
        # 真ん中の六角形
        stroke("#dc6159")
        strokeWeight(6)
        middle_radius = 80
        middle_vertices = calculate_hexagon_vertices(center_x, center_y, middle_radius)
        draw_polygon(middle_vertices)
      
        # 内側の六角形
        fill("#dc6159")
        stroke("#dc6159")
        strokeWeight(5)
        inner_radius = 60
        inner_vertices = calculate_hexagon_vertices(center_x, center_y, inner_radius)
        draw_polygon(inner_vertices)
      end
      
      # 六角形の頂点を取得
      def calculate_hexagon_vertices(x, y, radius)
        vertices = []
        6.times do |i|
          angle = PI / 3 * i - PI / 6
          vx = x + cos(angle) * radius
          vy = y + sin(angle) * radius
          vertices << { x: vx, y: vy }
        end
        vertices
      end
      
      # 多角形を描画
      def draw_polygon(vertices)
        beginShape
        vertices.each do |v|
          vertex(v[:x], v[:y])
        end
        endShape(CLOSE)
      end
    
      P5::init()
      
    </script>
  </head>
  <body>
    <main>
    </main>
  </body>
</html>
